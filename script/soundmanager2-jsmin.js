(function(a){function e(b,d,e){function bc(a){return function(b){var c=this._t;return c&&c._a?a.call(this,b):(c&&c.sID?h._wD(l+"ignoring "+b.type+": "+c.sID):h._wD(l+"ignoring "+b.type),null)}}this.flashVersion=8,this.debugMode=!0,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.html5PollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.domContainer=document.createElement("div");var f=this;this.getC=function(){return f.domContainer},e&&e===Object(e)&&c(this,e,!1,["allowScriptAccess","altURL","consoleOnly","debugFlash","debugMode","defaultOptions","flash9Options","features","flashLoadTimeout","flashVersion","movieStarOptions","url","useConsole","useFastPolling","flashPollingInterval","useFlashBlock","useHighPerformance","useHTML5Audio","useMovieStar","wmode","waitForWindowLoad"]),this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=d||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120318",this.version=null,this.movieURL=null,this.url=b||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&(new Audio).canPlayType!==void 0}catch(a){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var g,m,r,s,t,w,C,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,Z,$,_,cb,db,eb,fb,gb,hb,ib,jb,kb,nb,ob,pb,sb,ub,vb,wb,xb,yb,Ab,Bb,Eb,Fb,Gb,Hb,Ib,h=this,i=null,j="soundManager",k=j+"::",l="HTML5::",n=navigator.userAgent,o=a,p=""+o.location.href,q=document,u=[],v=!0,x=!1,y=!1,z=!1,A=!1,B=!1,D=0,X=["log","info","warn","error"],Y=8,ab=null,bb=null,lb=!1,mb=!1,qb=0,rb=null,tb=null,Cb=Array.prototype.slice,Db=!1,Jb=n.match(/(ipad|iphone|ipod)/i),Kb=n.match(/firefox/i),Lb=n.match(/droid/i),Mb=n.match(/msie/i),Nb=n.match(/webkit/i),Ob=n.match(/safari/i)&&!n.match(/chrome/i),Pb=n.match(/opera/i),Qb=n.match(/(mobile|pre\/|xoom)/i)||Jb,Rb=!p.match(/usehtml5audio/i)&&!p.match(/sm2\-ignorebadua/i)&&Ob&&!n.match(/silk/i)&&n.match(/OS X 10_6_([3-7])/i),Sb="undefined"!=typeof console&&console.log!==void 0,Tb=q.hasFocus!==void 0?q.hasFocus():null,Ub=Ob&&q.hasFocus===void 0,Vb=!Ub,Wb=/(mp3|mp4|mpa)/i,Xb="about:blank",Yb=q.location?q.location.protocol.match(/http/i):null,Zb=Yb?"":"http://",$b=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,_b=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],ac=RegExp("\\.("+_b.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Yb,this._global_a=null,fb={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},Qb&&(h.useHTML5Audio=!0,h.preferFlash=!1,Jb&&(h.ignoreFlash=!0,Db=!0)),this.ok=function(){return tb?z&&!A:h.useHTML5Audio&&h.hasHTML5},this.supported=this.ok,this.getMovie=function(a){return m(a)||q[a]||o[a]},this.createSound=function(a){function k(){return d=hb(d),h.sounds[f.id]=new g(f),h.soundIDs.push(f.id),h.sounds[f.id]}var b,c,d=null,e=null,f=null;return b=j+".createSound(): ",c=b+cb(z?"notOK":"notReady"),z&&h.ok()?(2===arguments.length&&(a={id:arguments[0],url:arguments[1]}),d=F(a),d.url=sb(d.url),f=d,(""+f.id).charAt(0).match(/^[0-9]$/)&&h._wD(b+cb("badID",f.id),2),h._wD(b+f.id+" ("+f.url+")",1),kb(f.id,!0)?(h._wD(b+f.id+" exists",1),h.sounds[f.id]):(vb(f)?(e=k(),h._wD("Loading sound "+f.id+" via HTML5"),e._setup_html5(f)):(t>8&&(null===f.isMovieStar&&(f.isMovieStar=f.serverURL||(f.type?f.type.match($b):!1)||f.url.match(ac)),f.isMovieStar&&h._wD(b+"using MovieStar handling"),f.isMovieStar&&(f.usePeakData&&(C("noPeak"),f.usePeakData=!1),f.loops>1&&C("noNSLoop"))),f=ib(f,b),e=k(),8===t?i._createSound(f.id,f.loops||1,f.usePolicyFile):(i._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:!1,f.loops||1,f.serverURL,f.duration||null,f.autoPlay,!0,f.autoLoad,f.usePolicyFile),f.serverURL||(e.connected=!0,f.onconnect&&f.onconnect.apply(e))),f.serverURL||!f.autoLoad&&!f.autoPlay||e.load(f)),!f.serverURL&&f.autoPlay&&e.play(),e)):(jb(c),!1)},this.destroySound=function(a,b){if(!kb(a))return!1;var d,c=h.sounds[a];for(c._iO={},c.stop(),c.unload(),d=0;h.soundIDs.length>d;d++)if(h.soundIDs[d]===a){h.soundIDs.splice(d,1);break}return b||c.destruct(!0),c=null,delete h.sounds[a],!0},this.load=function(a,b){return kb(a)?h.sounds[a].load(b):!1},this.unload=function(a){return kb(a)?h.sounds[a].unload():!1},this.onPosition=function(a,b,c,d){return kb(a)?h.sounds[a].onposition(b,c,d):!1},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return kb(a)?h.sounds[a].clearOnPosition(b,c):!1},this.play=function(a,b){return z&&h.ok()?kb(a)?h.sounds[a].play(b):(b instanceof Object||(b={url:b}),b&&b.url?(h._wD(j+'.play(): attempting to create "'+a+'"',1),b.id=a,h.createSound(b).play()):!1):(jb(j+".play(): "+cb(z?"notOK":"notReady")),!1)},this.start=this.play,this.setPosition=function(a,b){return kb(a)?h.sounds[a].setPosition(b):!1},this.stop=function(a){return kb(a)?(h._wD(j+".stop("+a+")",1),h.sounds[a].stop()):!1},this.stopAll=function(){var a;h._wD(j+".stopAll()",1);for(a in h.sounds)h.sounds.hasOwnProperty(a)&&h.sounds[a].stop()},this.pause=function(a){return kb(a)?h.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=h.soundIDs.length-1;a>=0;a--)h.sounds[h.soundIDs[a]].pause()},this.resume=function(a){return kb(a)?h.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=h.soundIDs.length-1;a>=0;a--)h.sounds[h.soundIDs[a]].resume()},this.togglePause=function(a){return kb(a)?h.sounds[a].togglePause():!1},this.setPan=function(a,b){return kb(a)?h.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return kb(a)?h.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;if("string"!=typeof a&&(a=null),a)return kb(a)?(h._wD(j+'.mute(): Muting "'+a+'"'),h.sounds[a].mute()):!1;for(h._wD(j+".mute(): Muting all sounds"),b=h.soundIDs.length-1;b>=0;b--)h.sounds[h.soundIDs[b]].mute();return h.muted=!0,!0},this.muteAll=function(){h.mute()},this.unmute=function(a){var b;if("string"!=typeof a&&(a=null),a)return kb(a)?(h._wD(j+'.unmute(): Unmuting "'+a+'"'),h.sounds[a].unmute()):!1;for(h._wD(j+".unmute(): Unmuting all sounds"),b=h.soundIDs.length-1;b>=0;b--)h.sounds[h.soundIDs[b]].unmute();return h.muted=!1,!0},this.unmuteAll=function(){h.unmute()},this.toggleMute=function(a){return kb(a)?h.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return i&&8!==t&&(a=parseInt(i._getMemoryUse(),10)),a},this.disable=function(a){var b;if(a===void 0&&(a=!1),A)return!1;for(A=!0,C("shutdown",1),b=h.soundIDs.length-1;b>=0;b--)Z(h.sounds[h.soundIDs[b]]);return E(a),Bb.remove(o,"load",I),!0},this.canPlayMIME=function(a){var b;return h.hasHTML5&&(b=wb({type:a})),!tb||b?b:a&&h.ok()?!!((t>8?a.match($b):null)||a.match(h.mimePattern)):null},this.canPlayURL=function(a){var b;return h.hasHTML5&&(b=wb({url:a})),!tb||b?b:a&&h.ok()?!!a.match(h.filePattern):null},this.canPlayLink=function(a){return a.type!==void 0&&a.type&&h.canPlayMIME(a.type)?!0:h.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)throw Error(j+".getSoundById(): sID is null/undefined");var c=h.sounds[a];return c||b||h._wD('"'+a+'" is an invalid sound ID.',2),c},this.onready=function(a,b){var c="onready";if(a&&a instanceof Function)return z&&h._wD(cb("queue",c)),b||(b=o),G(c,a,b),H(),!0;throw cb("needFunction",c)},this.ontimeout=function(a,b){var c="ontimeout";if(a&&a instanceof Function)return z&&h._wD(cb("queue",c)),b||(b=o),G(c,a,b),H({type:c}),!0;throw cb("needFunction",c)},this._writeDebug=function(a,b,c){var e,f,g,d="soundmanager-debug";if(!h.debugMode)return!1;if(c!==void 0&&c&&(a=a+" | "+(new Date).getTime()),Sb&&h.useConsole&&(g=X[b],console[g]!==void 0?console[g](a):console.log(a),h.consoleOnly))return!0;try{if(e=m(d),!e)return!1;f=q.createElement("div"),0===++D%2&&(f.className="sm2-alt"),b=b===void 0?0:parseInt(b,10),f.appendChild(q.createTextNode(a)),b&&(b>=2&&(f.style.fontWeight="bold"),3===b&&(f.style.color="#ff3333")),e.insertBefore(f,e.firstChild)}catch(i){}return e=null,!0},this._wD=this._writeDebug,this._debug=function(){var a,b;for(C("currentObj",1),a=0,b=h.soundIDs.length;b>a;a++)h.sounds[h.soundIDs[a]]._debug()},this.reboot=function(){h._wD(j+".reboot()"),h.soundIDs.length&&h._wD("Destroying "+h.soundIDs.length+" SMSound objects...");var a,b;for(a=h.soundIDs.length-1;a>=0;a--)h.sounds[h.soundIDs[a]].destruct();try{Mb&&(bb=i.innerHTML),ab=i.parentNode.removeChild(i),h._wD("Flash movie removed.")}catch(c){C("badRemove",2)}bb=ab=tb=null,h.enabled=R=z=lb=mb=x=y=A=h.swfLoaded=!1,h.soundIDs=[],h.sounds={},i=null;for(a in u)if(u.hasOwnProperty(a))for(b=u[a].length-1;b>=0;b--)u[a][b].fired=!1;h._wD(j+": Rebooting..."),o.setTimeout(h.beginDelayedInit,20)},this.getMoviePercent=function(){return i&&i.PercentLoaded!==void 0?i.PercentLoaded():null},this.beginDelayedInit=function(){B=!0,P(),setTimeout(function(){return mb?!1:(T(),O(),mb=!0,!0)},20),J()},this.destruct=function(){h._wD(j+".destruct()"),h.disable(!0)},g=function(a){var c,d,e,f,g,j,o,p,r,b=this,k=!1,m=[],n=0,q=null;r={duration:null,time:null},this.sID=a.id,this.url=a.url,this.options=F(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(h.debugMode){var d,e,a=null,c=[],f=64;for(a in b.options)null!==b.options[a]&&(b.options[a]instanceof Function?(d=""+b.options[a],d=d.replace(/\s\s+/g," "),e=d.indexOf("{"),c.push(" "+a+": {"+d.substr(e+1,Math.min(Math.max(d.indexOf("\n")-1,f),f)).replace(/\n/g,"")+"... }")):c.push(" "+a+": "+b.options[a]));h._wD("SMSound() merged options: {\n"+c.join(", \n")+"\n}")}},this._debug(),this.load=function(a){var d,c=null;if(a!==void 0?(b._iO=F(a,b.options),b.instanceOptions=b._iO):(a=b.options,b._iO=a,b.instanceOptions=b._iO,q&&q!==b.url&&(C("manURL"),b._iO.url=b.url,b.url=null)),b._iO.url||(b._iO.url=b.url),b._iO.url=sb(b._iO.url),h._wD("SMSound.load(): "+b._iO.url,1),b._iO.url===b.url&&0!==b.readyState&&2!==b.readyState)return C("onURL",1),3===b.readyState&&b._iO.onload&&b._iO.onload.apply(b,[!!b.duration]),b;if(d=b._iO,q=b.url,b.loaded=!1,b.readyState=1,b.playState=0,vb(d))c=b._setup_html5(d),c._called_load?h._wD(l+"ignoring request to load again: "+b.sID):(h._wD(l+"load: "+b.sID),b._html5_canplay=!1,b._a.autobuffer="auto",b._a.preload="auto",c.load(),c._called_load=!0,d.autoPlay&&b.play());else try{b.isHTML5=!1,b._iO=ib(hb(d)),d=b._iO,8===t?i._load(b.sID,d.url,d.stream,d.autoPlay,d.whileloading?1:0,d.loops||1,d.usePolicyFile):i._load(b.sID,d.url,!!d.stream,!!d.autoPlay,d.loops||1,!!d.autoLoad,d.usePolicyFile)}catch(e){C("smError",2),w("onload",!1),U({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return b},this.unload=function(){return 0!==b.readyState&&(h._wD('SMSound.unload(): "'+b.sID+'"'),b.isHTML5?(f(),b._a&&(b._a.pause(),yb(b._a))):8===t?i._unload(b.sID,Xb):i._unload(b.sID),c()),b},this.destruct=function(a){h._wD('SMSound.destruct(): "'+b.sID+'"'),b.isHTML5?(f(),b._a&&(b._a.pause(),yb(b._a),Db||e(),b._a._t=null,b._a=null)):(b._iO.onfailure=null,i._destroySound(b.sID)),a||h.destroySound(b.sID,!0)},this.play=function(a,c){var d,e,f,l;if(d="SMSound.play(): ",c=void 0===c?!0:c,a||(a={}),b._iO=F(a,b._iO),b._iO=F(b._iO,b.options),b._iO.url=sb(b._iO.url),b.instanceOptions=b._iO,b._iO.serverURL&&!b.connected)return b.getAutoPlay()||(h._wD(d+" Netstream not connected yet - setting autoPlay"),b.setAutoPlay(!0)),b;if(vb(b._iO)&&(b._setup_html5(b._iO),g()),1===b.playState&&!b.paused){if(e=b._iO.multiShot,!e)return h._wD(d+'"'+b.sID+'" already playing (one-shot)',1),b;h._wD(d+'"'+b.sID+'" already playing (multi-shot)',1)}if(b.loaded)h._wD(d+'"'+b.sID+'"');else if(0===b.readyState)h._wD(d+'Attempting to load "'+b.sID+'"',1),b.isHTML5||(b._iO.autoPlay=!0),b.load(b._iO);else{if(2===b.readyState)return h._wD(d+'Could not load "'+b.sID+'" - exiting',2),b;h._wD(d+'"'+b.sID+'" is loading - attempting to play..',1)}if(!b.isHTML5&&9===t&&b.position>0&&b.position===b.duration&&(h._wD(d+'"'+b.sID+'": Sound at end, resetting to position:0'),a.position=0),b.paused&&b.position&&b.position>0)h._wD(d+'"'+b.sID+'" is resuming from paused state',1),b.resume();else{if(b._iO=F(a,b._iO),null!==b._iO.from&&null!==b._iO.to&&0===b.instanceCount&&0===b.playState&&!b._iO.serverURL){if(l=function(){b._iO=F(a,b._iO),b.play(b._iO)},b.isHTML5&&!b._html5_canplay)return h._wD(d+'Beginning load of "'+b.sID+'" for from/to case'),b.load({_oncanplay:l}),!1;if(!(b.isHTML5||b.loaded||b.readyState&&2===b.readyState))return h._wD(d+'Preloading "'+b.sID+'" for from/to case'),b.load({onload:l}),!1;b._iO=p()}h._wD(d+'"'+b.sID+'" is starting to play'),(!b.instanceCount||b._iO.multiShotEvents||!b.isHTML5&&t>8&&!b.getAutoPlay())&&b.instanceCount++,0===b.playState&&b._iO.onposition&&j(b),b.playState=1,b.paused=!1,b.position=void 0===b._iO.position||isNaN(b._iO.position)?0:b._iO.position,b.isHTML5||(b._iO=ib(hb(b._iO))),b._iO.onplay&&c&&(b._iO.onplay.apply(b),k=!0),b.setVolume(b._iO.volume,!0),b.setPan(b._iO.pan,!0),b.isHTML5?(g(),f=b._setup_html5(),b.setPosition(b._iO.position),f.play()):i._start(b.sID,b._iO.loops||1,9===t?b._iO.position:b._iO.position/1e3)}return b},this.start=this.play,this.stop=function(a){var d,c=b._iO;return 1===b.playState&&(b._onbufferchange(0),b._resetOnPosition(0),b.paused=!1,b.isHTML5||(b.playState=0),o(),c.to&&b.clearOnPosition(c.to),b.isHTML5?b._a&&(d=b.position,b.setPosition(0),b.position=d,b._a.pause(),b.playState=0,b._onTimer(),f()):(i._stop(b.sID,a),c.serverURL&&b.unload()),b.instanceCount=0,b._iO={},c.onstop&&c.onstop.apply(b)),b},this.setAutoPlay=function(a){h._wD("sound "+b.sID+" turned autoplay "+(a?"on":"off")),b._iO.autoPlay=a,b.isHTML5||(i._setAutoPlay(b.sID,a),a&&(b.instanceCount||1!==b.readyState||(b.instanceCount++,h._wD("sound "+b.sID+" incremented instance count to "+b.instanceCount))))},this.getAutoPlay=function(){return b._iO.autoPlay},this.setPosition=function(a){void 0===a&&(a=0);var c,d,e,f=b.isHTML5?Math.max(a,0):Math.min(b.duration||b._iO.duration,Math.max(a,0));if(c=b.position,b.position=f,e=b.position/1e3,b._resetOnPosition(b.position),b._iO.position=f,b.isHTML5){if(b._a)if(b._html5_canplay){if(b._a.currentTime!==e){h._wD("setPosition("+e+"): setting position");try{b._a.currentTime=e,(0===b.playState||b.paused)&&b._a.pause()}catch(g){h._wD("setPosition("+e+"): setting position failed: "+g.message,2)}}}else h._wD("setPosition("+e+"): delaying, sound not ready")}else d=9===t?b.position:e,b.readyState&&2!==b.readyState&&i._setPosition(b.sID,d,b.paused||!b.playState);return b.isHTML5&&b.paused&&b._onTimer(!0),b},this.pause=function(a){return b.paused||0===b.playState&&1!==b.readyState?b:(h._wD("SMSound.pause()"),b.paused=!0,b.isHTML5?(b._setup_html5().pause(),f()):(a||void 0===a)&&i._pause(b.sID),b._iO.onpause&&b._iO.onpause.apply(b),b)},this.resume=function(){var a=b._iO;return b.paused?(h._wD("SMSound.resume()"),b.paused=!1,b.playState=1,b.isHTML5?(b._setup_html5().play(),g()):(a.isMovieStar&&!a.serverURL&&b.setPosition(b.position),i._pause(b.sID)),!k&&a.onplay?(a.onplay.apply(b),k=!0):a.onresume&&a.onresume.apply(b),b):b},this.togglePause=function(){return h._wD("SMSound.togglePause()"),0===b.playState?(b.play({position:9!==t||b.isHTML5?b.position/1e3:b.position}),b):(b.paused?b.resume():b.pause(),b)},this.setPan=function(a,c){return a===void 0&&(a=0),c===void 0&&(c=!1),b.isHTML5||i._setPan(b.sID,a),b._iO.pan=a,c||(b.pan=a,b.options.pan=a),b},this.setVolume=function(a,c){return a===void 0&&(a=100),c===void 0&&(c=!1),b.isHTML5?b._a&&(b._a.volume=Math.max(0,Math.min(1,a/100))):i._setVolume(b.sID,h.muted&&!b.muted||b.muted?0:a),b._iO.volume=a,c||(b.volume=a,b.options.volume=a),b},this.mute=function(){return b.muted=!0,b.isHTML5?b._a&&(b._a.muted=!0):i._setVolume(b.sID,0),b},this.unmute=function(){b.muted=!1;var a=b._iO.volume!==void 0;return b.isHTML5?b._a&&(b._a.muted=!1):i._setVolume(b.sID,a?b._iO.volume:b.options.volume),b},this.toggleMute=function(){return b.muted?b.unmute():b.mute()},this.onPosition=function(a,c,d){return m.push({position:parseInt(a,10),method:c,scope:d!==void 0?d:b,fired:!1}),b},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;m.length>c;c++)a===m[c].position&&(b&&b!==m[c].method||(m[c].fired&&n--,m.splice(c,1)))},this._processOnPosition=function(){var a,c,d=m.length;if(!d||!b.playState||n>=d)return!1;for(a=d-1;a>=0;a--)c=m[a],!c.fired&&b.position>=c.position&&(c.fired=!0,n++,c.method.apply(c.scope,[c.position]));return!0},this._resetOnPosition=function(a){var b,c,d=m.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=m[b],c.fired&&c.position>=a&&(c.fired=!1,n--);return!0},p=function(){var e,f,a=b._iO,c=a.from,d=a.to;return f=function(){h._wD(b.sID+': "to" time of '+d+" reached."),b.clearOnPosition(d,f),b.stop()},e=function(){h._wD(b.sID+': playing "from" '+c),null===d||isNaN(d)||b.onPosition(d,f)},null===c||isNaN(c)||(a.position=c,a.multiShot=!1,e()),a},j=function(){var a,c=b._iO.onposition;if(c)for(a in c)c.hasOwnProperty(a)&&b.onPosition(parseInt(a,10),c[a])},o=function(){var a,c=b._iO.onposition;if(c)for(a in c)c.hasOwnProperty(a)&&b.clearOnPosition(parseInt(a,10))},g=function(){b.isHTML5&&nb(b)},f=function(){b.isHTML5&&ob(b)},c=function(){m=[],n=0,k=!1,b._hasTimer=null,b._a=null,b._html5_canplay=!1,b.bytesLoaded=null,b.bytesTotal=null,b.duration=b._iO&&b._iO.duration?b._iO.duration:null,b.durationEstimate=null,b.eqData=[],b.eqData.left=[],b.eqData.right=[],b.failures=0,b.isBuffering=!1,b.instanceOptions={},b.instanceCount=0,b.loaded=!1,b.metadata={},b.readyState=0,b.muted=!1,b.paused=!1,b.peakData={left:0,right:0},b.waveformData={left:[],right:[]},b.playState=0,b.position=null},c(),this._onTimer=function(a){var c,e,d=!1,f={};return b._hasTimer||a?b._a&&(a||(b.playState>0||1===b.readyState)&&!b.paused)?(c=b._get_html5_duration(),c!==r.duration&&(r.duration=c,b.duration=c,d=!0),b.durationEstimate=b.duration,e=1e3*b._a.currentTime||0,e!==r.time&&(r.time=e,d=!0),(d||a)&&b._whileplaying(e,f,f,f,f),d):!1:void 0},this._get_html5_duration=function(){var a=b._iO,c=b._a?1e3*b._a.duration:a?a.duration:void 0,d=c&&!isNaN(c)&&1/0!==c?c:a?a.duration:null;return d},this._setup_html5=function(a){var e=F(b._iO,a),f=decodeURI,g=Db?h._global_a:b._a,i=f(e.url),j=g&&g._t?g._t.instanceOptions:null;if(g){if(g._t){if(!Db&&i===f(q))return g;if(Db&&j.url===e.url&&(!q||q===j.url))return g}h._wD("setting new URL on existing object: "+i+(q?", old URL: "+q:"")),Db&&g._t&&g._t.playState&&e.url!==j.url&&g._t.stop(),c(),g.src=e.url,b.url=e.url,q=e.url,g._called_load=!1}else h._wD("creating HTML5 Audio() element with URL: "+i),g=new Audio(e.url),g._called_load=!1,Lb&&(g._called_load=!0),Db&&(h._global_a=g);return b.isHTML5=!0,b._a=g,g._t=b,d(),g.loop=e.loops>1?"loop":"",e.autoLoad||e.autoPlay?b.load():(g.autobuffer=!1,g.preload="none"),g.loop=e.loops>1?"loop":"",g},d=function(){function c(a,c,d){return b._a?b._a.addEventListener(a,c,d||!1):null}if(b._a._added_events)return!1;var a;h._wD(l+"adding event listeners: "+b.sID),b._a._added_events=!0;for(a in Hb)Hb.hasOwnProperty(a)&&c(a,Hb[a]);return!0},e=function(){function c(a,c,d){return b._a?b._a.removeEventListener(a,c,d||!1):null}var a;h._wD(l+"removing event listeners: "+b.sID),b._a._added_events=!1;for(a in Hb)Hb.hasOwnProperty(a)&&c(a,Hb[a])},this._onload=function(a){var c,d=!!a;return c="SMSound._onload(): ",h._wD(c+'"'+b.sID+'"'+(d?" loaded.":" failed to load? - "+b.url),d?1:2),d||b.isHTML5||(h.sandbox.noRemote===!0&&h._wD(c+cb("noNet"),1),h.sandbox.noLocal===!0&&h._wD(c+cb("noLocal"),1)),b.loaded=d,b.readyState=d?3:2,b._onbufferchange(0),b._iO.onload&&b._iO.onload.apply(b,[d]),!0},this._onbufferchange=function(a){return 0===b.playState?!1:a&&b.isBuffering||!a&&!b.isBuffering?!1:(b.isBuffering=1===a,b._iO.onbufferchange&&(h._wD("SMSound._onbufferchange(): "+a),b._iO.onbufferchange.apply(b)),!0)},this._onsuspend=function(){return b._iO.onsuspend&&(h._wD("SMSound._onsuspend()"),b._iO.onsuspend.apply(b)),!0},this._onfailure=function(a,c,d){b.failures++,h._wD('SMSound._onfailure(): "'+b.sID+'" count '+b.failures),b._iO.onfailure&&1===b.failures?b._iO.onfailure(b,a,c,d):h._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var a=b._iO.onfinish;b._onbufferchange(0),b._resetOnPosition(0),b.instanceCount&&(b.instanceCount--,b.instanceCount||(o(),b.playState=0,b.paused=!1,b.instanceCount=0,b.instanceOptions={},b._iO={},f()),(!b.instanceCount||b._iO.multiShotEvents)&&a&&(h._wD('SMSound._onfinish(): "'+b.sID+'"'),a.apply(b)))},this._whileloading=function(a,c,d,e){var f=b._iO;b.bytesLoaded=a,b.bytesTotal=c,b.duration=Math.floor(d),b.bufferLength=e,f.isMovieStar?(b.durationEstimate=b.duration,3!==b.readyState&&f.whileloading&&f.whileloading.apply(b)):(b.durationEstimate=f.duration?b.duration>f.duration?b.duration:f.duration:parseInt(b.bytesTotal/b.bytesLoaded*b.duration,10),void 0===b.durationEstimate&&(b.durationEstimate=b.duration),3!==b.readyState&&f.whileloading&&f.whileloading.apply(b))},this._whileplaying=function(a,c,d,e,f){var h,g=b._iO;return isNaN(a)||null===a?!1:(b.position=a,b._processOnPosition(),!b.isHTML5&&t>8&&(g.usePeakData&&c!==void 0&&c&&(b.peakData={left:c.leftPeak,right:c.rightPeak}),g.useWaveformData&&d!==void 0&&d&&(b.waveformData={left:d.split(","),right:e.split(",")}),g.useEQData&&f!==void 0&&f&&f.leftEQ&&(h=f.leftEQ.split(","),b.eqData=h,b.eqData.left=h,f.rightEQ!==void 0&&f.rightEQ&&(b.eqData.right=f.rightEQ.split(",")))),1===b.playState&&(b.isHTML5||8!==t||b.position||!b.isBuffering||b._onbufferchange(0),g.whileplaying&&g.whileplaying.apply(b)),!0)},this._onmetadata=function(a,c){h._wD('SMSound._onmetadata(): "'+this.sID+'" metadata received.');var e,f,d={};for(e=0,f=a.length;f>e;e++)d[a[e]]=c[e];b.metadata=d,b._iO.onmetadata&&b._iO.onmetadata.apply(b)},this._onid3=function(a,c){h._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var e,f,d=[];for(e=0,f=a.length;f>e;e++)d[a[e]]=c[e];b.id3=F(b.id3,d),b._iO.onid3&&b._iO.onid3.apply(b)},this._onconnect=function(a){a=1===a,h._wD('SMSound._onconnect(): "'+b.sID+'"'+(a?" connected.":" failed to connect? - "+b.url),a?1:2),b.connected=a,a&&(b.failures=0,kb(b.sID)&&(b.getAutoPlay()?b.play(void 0,b.getAutoPlay()):b._iO.autoLoad&&b.load()),b._iO.onconnect&&b._iO.onconnect.apply(b,[a]))},this._ondataerror=function(a){b.playState>0&&(h._wD("SMSound._ondataerror(): "+a),b._iO.ondataerror&&b._iO.ondataerror.apply(b))}},S=function(){return q.body||q._docElement||q.getElementsByTagName("div")[0]},m=function(a){return q.getElementById(a)},F=function(a,b){var d,e,f,c={};for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);e=b===void 0?h.defaultOptions:b;for(f in e)e.hasOwnProperty(f)&&c[f]===void 0&&(c[f]=e[f]);return c},Bb=function(){function c(b){var c=Cb.call(b),d=c.length;return a?(c[1]="on"+c[1],d>3&&c.pop()):3===d&&c.push(!1),c}function d(c,d){var e=c.shift(),f=[b[d]];a?e[f](c[0],c[1]):e[f].apply(e,c)}function e(){d(c(arguments),"add")}function f(){d(c(arguments),"remove")}var a=o.attachEvent,b={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:e,remove:f}}(),Hb={abort:bc(function(){h._wD(l+"abort: "+this._t.sID)}),canplay:bc(function(){var b,a=this._t;if(a._html5_canplay)return!0;if(a._html5_canplay=!0,h._wD(l+"canplay: "+a.sID+", "+a.url),a._onbufferchange(0),b=isNaN(a.position)?null:a.position/1e3,a.position&&this.currentTime!==b){h._wD(l+"canplay: setting position to "+b);try{this.currentTime=b}catch(c){h._wD(l+"setting position failed: "+c.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),load:bc(function(){var a=this._t;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesTotal,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),ended:bc(function(){var a=this._t;h._wD(l+"ended: "+a.sID),a._onfinish()}),error:bc(function(){h._wD(l+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:bc(function(){var a=this._t,b=a.bytesTotal||1;h._wD(l+"loadeddata: "+this._t.sID),a._loaded||Ob||(a.duration=a._get_html5_duration(),a._whileloading(b,b,a._get_html5_duration()),a._onload(!0))}),loadedmetadata:bc(function(){h._wD(l+"loadedmetadata: "+this._t.sID)}),loadstart:bc(function(){h._wD(l+"loadstart: "+this._t.sID),this._t._onbufferchange(1)}),play:bc(function(){h._wD(l+"play: "+this._t.sID+", "+this._t.url),this._t._onbufferchange(0)}),playing:bc(function(){h._wD(l+"playing: "+this._t.sID),this._t._onbufferchange(0)}),progress:bc(function(a){var c,d,e,b=this._t,f=0,g="progress"===a.type,i=a.target.buffered,j=a.loaded||0,k=a.total||1;if(b.loaded)return!1;if(i&&i.length){for(c=i.length-1;c>=0;c--)f=i.end(c)-i.start(c);if(j=f/a.target.duration,g&&i.length>1){for(e=[],d=i.length,c=0;d>c;c++)e.push(a.target.buffered.start(c)+"-"+a.target.buffered.end(c));h._wD(l+"progress: timeRanges: "+e.join(", "))}g&&!isNaN(j)&&h._wD(l+"progress: "+b.sID+": "+Math.floor(100*j)+"% loaded")}isNaN(j)||(b._onbufferchange(0),b._whileloading(j,k,b._get_html5_duration()),j&&k&&j===k&&Hb.load.call(this,a))}),ratechange:bc(function(){h._wD(l+"ratechange: "+this._t.sID)}),suspend:bc(function(a){var b=this._t;h._wD(l+"suspend: "+b.sID),Hb.progress.call(this,a),b._onsuspend()}),stalled:bc(function(){h._wD(l+"stalled: "+this._t.sID)}),timeupdate:bc(function(){this._t._onTimer()}),waiting:bc(function(){var a=this._t;h._wD(l+"waiting: "+a.sID),a._onbufferchange(1)})},vb=function(a){return!a.serverURL&&(a.type?wb({type:a.type}):wb({url:a.url})||h.html5Only)},yb=function(a){a&&(a.src=Kb?"":Xb)},wb=function(a){function j(a){return h.preferFlash&&Eb&&!h.ignoreFlash&&h.flash[a]!==void 0&&h.flash[a]}if(!h.useHTML5Audio||!h.hasHTML5)return!1;var e,f,g,i,b=a.url||null,c=a.type||null,d=h.audioFormats;if(c&&h.html5[c]!==void 0)return h.html5[c]&&!j(c);if(!xb){xb=[];for(i in d)d.hasOwnProperty(i)&&(xb.push(i),d[i].related&&(xb=xb.concat(d[i].related)));xb=RegExp("\\.("+xb.join("|")+")(\\?.*)?$","i")}if(g=b?b.toLowerCase().match(xb):null,g&&g.length)g=g[1];else{if(!c)return!1;f=c.indexOf(";"),g=(-1!==f?c.substr(0,f):c).substr(6)}return g&&h.html5[g]!==void 0?h.html5[g]&&!j(g):(c="audio/"+g,e=h.html5.canPlayType({type:c}),h.html5[g]=e,e&&h.html5[c]&&!j(c))},Ab=function(){function f(b){var c,d,e,f=!1;if(!a||"function"!=typeof a.canPlayType)return!1;if(b instanceof Array){for(d=0,e=b.length;e>d&&!f;d++)(h.html5[b[d]]||a.canPlayType(b[d]).match(h.html5Test))&&(f=!0,h.html5[b[d]]=!0,h.flash[b[d]]=!!(h.preferFlash&&Eb&&b[d].match(Wb)));return f}return c=a&&"function"==typeof a.canPlayType?a.canPlayType(b):!1,!(!c||!c.match(h.html5Test))}if(!h.useHTML5Audio||"undefined"==typeof Audio)return!1;var b,d,e,a="undefined"!=typeof Audio?Pb?new Audio(null):new Audio:null,c={};d=h.audioFormats;for(b in d)if(d.hasOwnProperty(b)&&(c[b]=f(d[b].type),c["audio/"+b]=c[b],h.flash[b]=h.preferFlash&&!h.ignoreFlash&&b.match(Wb)?!0:!1,d[b]&&d[b].related))for(e=d[b].related.length-1;e>=0;e--)c["audio/"+d[b].related[e]]=c[b],h.html5[d[b].related[e]]=c[b],h.flash[d[b].related[e]]=c[b];return c.canPlayType=a?f:null,h.html5=F(h.html5,c),!0},N={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:k+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:k+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:j+": Verify that %s is a valid path.",tryDebug:"Try "+j+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:j+": Non-HTTP page ("+q.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:j+": Special case: Waiting for focus-related event..",waitImpatient:j+": Getting impatient, still waiting for Flash%s...",waitForever:j+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:j+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+j+"._debug(): Current sound objects ---",waitEI:k+"initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:j+": Waiting for window.onload()",docLoaded:j+": Document already loaded",onload:k+"initComplete(): calling soundManager.onload()",onloadOK:j+".onload() complete",init:k+"init()",didInit:k+"init(): Already called?",flashJS:j+": Attempting to call Flash from JS..",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:j+".disable(): Shutting down",queue:j+": Queueing %s handler",smFail:j+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+fb.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:k+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:j+".load(): current URL already assigned.",badFV:j+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"},cb=function(){var d,e,a=Cb.call(arguments),b=a.shift(),c=N&&N[b]?N[b]:"";if(c&&a&&a.length)for(d=0,e=a.length;e>d;d++)c=c.replace("%s",a[d]);return c},hb=function(a){return 8===t&&a.loops>1&&a.stream&&(C("as2loop"),a.stream=!1),a},ib=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(h._wD((b||"")+cb("policy")),a.usePolicyFile=!0),a
},jb=function(a){"undefined"!=typeof console&&console.warn!==void 0?console.warn(a):h._wD(a)},r=function(){return!1},Z=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=r);b=null},$=function(a){a===void 0&&(a=!1),(A||a)&&(C("smFail",2),h.disable(a))},_=function(a){var c,b=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(b=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return c=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+h.movieURL,h.noSWFCache&&(c+="?ts="+(new Date).getTime()),c},L=function(){t=parseInt(h.flashVersion,10),8!==t&&9!==t&&(h._wD(cb("badFV",t,Y)),h.flashVersion=t=Y);var a=h.debugMode||h.debugFlash?"_debug.swf":".swf";h.useHTML5Audio&&!h.html5Only&&h.audioFormats.mp4.required&&9>t&&(h._wD(cb("needfl9")),h.flashVersion=t=9),h.version=h.versionNumber+(h.html5Only?" (HTML5-only mode)":9===t?" (AS3/Flash 9)":" (AS2/Flash 8)"),t>8?(h.defaultOptions=F(h.defaultOptions,h.flash9Options),h.features.buffering=!0,h.defaultOptions=F(h.defaultOptions,h.movieStarOptions),h.filePatterns.flash9=RegExp("\\.(mp3|"+_b.join("|")+")(\\?.*)?$","i"),h.features.movieStar=!0):h.features.movieStar=!1,h.filePattern=h.filePatterns[8!==t?"flash9":"flash8"],h.movieURL=(8===t?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),h.features.peakData=h.features.waveformData=h.features.eqData=t>8},V=function(a,b){return i?(i._setPolling(a,b),void 0):!1},W=function(){if(h.debugURLParam.test(p)&&(h.debugMode=!0),m(h.debugID))return!1;var a,b,c,d,e;if(!(!h.debugMode||m(h.debugID)||Sb&&h.useConsole&&h.consoleOnly)){a=q.createElement("div"),a.id=h.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(q.createTextNode("-")),a.onclick=gb,a.title="Toggle SM2 debug console",n.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=q.createElement("div"),b.id=h.debugID,b.style.display=h.debugMode?"block":"none",h.debugMode&&!m(a.id)){try{c=h.domContainer,c.appendChild(a)}catch(f){throw Error(cb("domError")+" \n"+(""+f))}c.appendChild(b)}}c=null},kb=this.getSoundById,C=function(a,b){return a?h._wD(cb(a),b):""},p.indexOf("sm2-debug=alert")+1&&h.debugMode&&(h._wD=function(b){a.alert(b)}),gb=function(){var a=m(h.debugID),b=m(h.debugID+"-toggle");return a?(v?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),v=!v,void 0):!1},w=function(a,b,c){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(a,b,c)}catch(d){}return!0},eb=function(){var a=[];return h.debugMode&&a.push(fb.sm2Debug),h.debugFlash&&a.push(fb.flashDebug),h.useHighPerformance&&a.push(fb.highPerf),a.join(" ")},db=function(){var a=cb("fbHandler"),b=h.getMoviePercent(),c=fb,d={type:"FLASHBLOCK"};return h.html5Only?!1:(h.ok()?(h.didFlashBlock&&h._wD(a+": Unblocked"),h.oMC&&(h.oMC.className=[eb(),c.swfDefault,c.swfLoaded+(h.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(tb&&(h.oMC.className=eb()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),h._wD(a+": "+cb("fbTimeout")+(b?" ("+cb("fbLoaded")+")":""))),h.didFlashBlock=!0,H({type:"ontimeout",ignoreInit:!0,error:d}),U(d)),void 0)},G=function(a,b,c){u[a]===void 0&&(u[a]=[]),u[a].push({method:b,scope:c||null,fired:!1})},H=function(a){if(a||(a={type:"onready"}),!z&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&h.ok())return!1;var e,f,b={success:a&&a.ignoreInit?h.ok():!A},c=a&&a.type?u[a.type]||[]:[],d=[],g=[b],i=tb&&h.useFlashBlock&&!h.ok();for(a.error&&(g[0].error=a.error),e=0,f=c.length;f>e;e++)c[e].fired!==!0&&d.push(c[e]);if(d.length)for(h._wD(j+": Firing "+d.length+" "+a.type+"() item"+(1===d.length?"":"s")),e=0,f=d.length;f>e;e++)d[e].scope?d[e].method.apply(d[e].scope,g):d[e].method.apply(this,g),i||(d[e].fired=!0);return!0},I=function(){o.setTimeout(function(){h.useFlashBlock&&db(),H(),h.onload instanceof Function&&(C("onload",1),h.onload.apply(o),C("onloadOK",1)),h.waitForWindowLoad&&Bb.add(o,"load",I)},1)},Fb=function(){if(void 0!==Eb)return Eb;var d,e,f,a=!1,b=navigator,c=b.plugins,g=o.ActiveXObject;if(c&&c.length)e="application/x-shockwave-flash",f=b.mimeTypes,f&&f[e]&&f[e].enabledPlugin&&f[e].enabledPlugin.description&&(a=!0);else if(g!==void 0){try{d=new g("ShockwaveFlash.ShockwaveFlash")}catch(h){}a=!!d}return Eb=a,a},ub=function(){var a,b,c=Jb&&!!n.match(/os (1|2|3_0|3_1)/i);if(c)return h.hasHTML5=!1,h.html5Only=!0,h.oMC&&(h.oMC.style.display="none"),!1;if(!h.useHTML5Audio)return!0;if(!h.html5||!h.html5.canPlayType)return h._wD("SoundManager: No HTML5 Audio() support detected."),h.hasHTML5=!1,!0;if(h.hasHTML5=!0,Rb&&(h._wD(k+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(Eb?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1),Fb()))return!0;for(b in h.audioFormats)h.audioFormats.hasOwnProperty(b)&&(h.audioFormats[b].required&&!h.html5.canPlayType(h.audioFormats[b].type)||h.flash[b]||h.flash[h.audioFormats[b].type])&&(a=!0);return h.ignoreFlash&&(a=!1),h.html5Only=h.hasHTML5&&h.useHTML5Audio&&!a,!h.html5Only},sb=function(a){var b,c,d=0;if(a instanceof Array){for(b=0,c=a.length;c>b;b++)if(a[b]instanceof Object){if(h.canPlayMIME(a[b].type)){d=b;break}}else if(h.canPlayURL(a[b])){d=b;break}return a[d].url&&(a[d]=a[d].url),a[d]}return a},nb=function(b){b._hasTimer||(b._hasTimer=!0,!Qb&&h.html5PollingInterval&&(null===rb&&0===qb&&(rb=a.setInterval(pb,h.html5PollingInterval)),qb++))},ob=function(a){a._hasTimer&&(a._hasTimer=!1,!Qb&&h.html5PollingInterval&&qb--)},pb=function(){var b;if(null!==rb&&!qb)return a.clearInterval(rb),rb=null,!1;for(b=h.soundIDs.length-1;b>=0;b--)h.sounds[h.soundIDs[b]].isHTML5&&h.sounds[h.soundIDs[b]]._hasTimer&&h.sounds[h.soundIDs[b]]._onTimer()},U=function(a){a=a!==void 0?a:{},h.onerror instanceof Function&&h.onerror.apply(o,[{type:a.type!==void 0?a.type:null}]),a.fatal!==void 0&&a.fatal&&h.disable()},Gb=function(){if(!Rb||!Fb())return!1;var b,c,a=h.audioFormats;for(c in a)if(a.hasOwnProperty(c)&&("mp3"===c||"mp4"===c)&&(h._wD(j+": Using flash fallback for "+c+" format"),h.html5[c]=!1,a[c]&&a[c].related))for(b=a[c].related.length-1;b>=0;b--)h.html5[a[c].related[b]]=!1},this._setSandboxType=function(a){var b=h.sandbox;b.type=a,b.description=b.types[b.types[a]!==void 0?a:"unknown"],h._wD("Flash security sandbox type: "+b.type),"localWithFile"===b.type?(b.noRemote=!0,b.noLocal=!1,C("secNote",2)):"localWithNetwork"===b.type?(b.noRemote=!1,b.noLocal=!0):"localTrusted"===b.type&&(b.noRemote=!1,b.noLocal=!1)},this._externalInterfaceOK=function(a,b){if(h.swfLoaded)return!1;var c,d=(new Date).getTime();return h._wD(k+"externalInterfaceOK()"+(a?" (~"+(d-a)+" ms)":"")),w("swf",!0),w("flashtojs",!0),h.swfLoaded=!0,Ub=!1,Rb&&Gb(),b&&b.replace(/\+dev/i,"")===h.versionNumber.replace(/\+dev/i,"")?(Mb?setTimeout(s,100):s(),void 0):(c=j+': Fatal: JavaScript file build "'+h.versionNumber+'" does not match Flash SWF build "'+b+'" at '+h.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(c)},0),!1)},T=function(a,b){function c(){h._wD("-- SoundManager 2 "+h.version+(!h.html5Only&&h.useHTML5Audio?h.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(h.html5Only?"":(h.useHighPerformance?", high performance mode, ":", ")+((h.flashPollingInterval?"custom ("+h.flashPollingInterval+"ms)":"normal")+" polling")+(h.wmode?", wmode: "+h.wmode:"")+(h.debugFlash?", flash debug mode":"")+(h.useFlashBlock?", flashBlock mode":""))+" --",1)}function B(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(x&&y)return!1;if(h.html5Only)return L(),c(),h.oMC=m(h.movieID),s(),x=!0,y=!0,!1;var g,i,l,o,p,t,u,v,d=b||h.url,e=h.altURL||d,f="JS/Flash audio component (SoundManager 2)",j=S(),r=eb(),w=null,z=null,A=q.getElementsByTagName("html")[0];if(z=A&&A.dir&&A.dir.match(/rtl/i),a=a===void 0?h.id:a,L(),h.url=_(Yb?d:e),b=h.url,h.wmode=!h.wmode&&h.useHighPerformance?"transparent":h.wmode,null!==h.wmode&&(n.match(/msie 8/i)||!Mb&&!h.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(C("spcWmode"),h.wmode=null),g={name:a,id:a,src:b,quality:"high",allowScriptAccess:h.allowScriptAccess,bgcolor:h.bgColor,pluginspage:Zb+"www.macromedia.com/go/getflashplayer",title:f,type:"application/x-shockwave-flash",wmode:h.wmode,hasPriority:"true"},null!==w&&(g.width=w,g.height=w),h.debugFlash&&(g.FlashVars="debug=1"),h.wmode||delete g.wmode,Mb)i=q.createElement("div"),o=['<object id="'+a+'" data="'+b+'" type="'+g.type+'" title="'+g.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Zb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+g.width+'" height="'+g.height+'">',B("movie",b),B("AllowScriptAccess",h.allowScriptAccess),B("quality",g.quality),h.wmode?B("wmode",h.wmode):"",B("bgcolor",h.bgColor),B("hasPriority","true"),h.debugFlash?B("FlashVars",g.FlashVars):"","</object>"].join("");else{i=q.createElement("embed");for(l in g)g.hasOwnProperty(l)&&i.setAttribute(l,g[l])}if(W(),r=eb(),j=h.domContainer)if(h.oMC=m(h.movieID)||q.createElement("div"),h.oMC.id)v=h.oMC.className,h.oMC.className=(v?v+" ":fb.swfDefault)+(r?" "+r:""),h.oMC.appendChild(i),Mb&&(p=h.oMC.appendChild(q.createElement("div")),p.className=fb.swfBox,p.innerHTML=o),y=!0;else{if(h.oMC.id=h.movieID,h.oMC.className=fb.swfDefault+" "+r,t=null,p=null,h.useFlashBlock||(h.useHighPerformance?t={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(t={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},z&&(t.left=Math.abs(parseInt(t.left,10))+"px"))),Nb&&(h.oMC.style.zIndex=1e4),!h.debugFlash)for(u in t)t.hasOwnProperty(u)&&(h.oMC.style[u]=t[u]);try{Mb||h.oMC.appendChild(i),j.appendChild(h.oMC),Mb&&(p=h.oMC.appendChild(q.createElement("div")),p.className=fb.swfBox,p.innerHTML=o),y=!0}catch(D){throw Error(cb("domError")+" \n"+(""+D))}}return x=!0,c(),h._wD(k+"createMovie(): Trying to load "+b+(!Yb&&h.altURL?" (alternate URL)":""),1),!0},O=function(){return h.html5Only?(T(),!1):i?!1:(i=h.getMovie(h.id),i||(ab?(Mb?h.oMC.innerHTML=bb:h.oMC.appendChild(ab),ab=null,x=!0):T(h.id,h.url),i=h.getMovie(h.id)),i&&C("waitEI"),h.oninitmovie instanceof Function&&setTimeout(h.oninitmovie,1),!0)},J=function(){setTimeout(K,1e3)},K=function(){if(lb)return!1;if(lb=!0,Bb.remove(o,"load",J),Ub&&!Tb)return C("waitFocus"),!1;var a;z||(a=h.getMoviePercent(),h._wD(cb("waitImpatient",100===a?" (SWF loaded)":a>0?" (SWF "+a+"% loaded)":""))),setTimeout(function(){a=h.getMoviePercent(),z||(h._wD(j+": No Flash response within expected time.\nLikely causes: "+(0===a?"Loading "+h.movieURL+" may have failed (and/or Flash "+t+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(h.debugFlash?" "+cb("checkSWF"):""),2),!Yb&&a&&(C("localFail",2),h.debugFlash||C("tryDebug",2)),0===a&&h._wD(cb("swf404",h.url)),w("flashtojs",!1," (Check flash security or flash blockers)")),!z&&Vb&&(null===a?h.useFlashBlock||0===h.flashLoadTimeout?(h.useFlashBlock&&db(),C("waitForever")):$(!0):0===h.flashLoadTimeout?C("waitForever"):$(!0))},h.flashLoadTimeout)},M=function(){function a(){Bb.remove(o,"focus",M),Bb.remove(o,"load",M)}return Tb||!Ub?(a(),!0):(Vb=!0,Tb=!0,h._wD(k+"handleFocus()"),Ob&&Ub&&Bb.remove(o,"mousemove",M),lb=!1,a(),!0)},Ib=function(){var a,b=[];if(h.useHTML5Audio&&h.hasHTML5){for(a in h.audioFormats)h.audioFormats.hasOwnProperty(a)&&b.push(a+": "+h.html5[a]+(!h.html5[a]&&Eb&&h.flash[a]?" (using flash)":h.preferFlash&&h.flash[a]&&Eb?" (preferring flash)":h.html5[a]?"":" ("+(h.audioFormats[a].required?"required, ":"")+"and no flash support)"));h._wD("-- SoundManager 2: HTML5 support tests ("+h.html5Test+"): "+b.join(", ")+" --",1)}},E=function(a){if(z)return!1;if(h.html5Only)return h._wD("-- SoundManager 2: loaded --"),z=!0,I(),w("onload",!0),!0;var c,b=h.useFlashBlock&&h.flashLoadTimeout&&!h.getMoviePercent();return b||(z=!0,A&&(c={type:!Eb&&tb?"NO_FLASH":"INIT_TIMEOUT"})),h._wD("-- SoundManager 2 "+(A?"failed to load":"loaded")+" ("+(A?"security/load error":"OK")+") --",1),A||a?(h.useFlashBlock&&h.oMC&&(h.oMC.className=eb()+" "+(null===h.getMoviePercent()?fb.swfTimedout:fb.swfError)),H({type:"ontimeout",error:c}),w("onload",!1),U(c),!1):(w("onload",!0),h.waitForWindowLoad&&!B?(C("waitOnload"),Bb.add(o,"load",I),!1):(h.waitForWindowLoad&&B&&C("docLoaded"),I(),!0))},s=function(){function a(){Bb.remove(o,"load",h.beginDelayedInit)}if(C("init"),z)return C("didInit"),!1;if(h.html5Only)return z||(a(),h.enabled=!0,E()),!0;O();try{C("flashJS"),i._externalInterfaceTest(!1),V(!0,h.flashPollingInterval||(h.useHighPerformance?10:50)),h.debugMode||i._disableDebug(),h.enabled=!0,w("jstoflash",!0),h.html5Only||Bb.add(o,"unload",r)}catch(b){return h._wD("js/flash exception: "+(""+b)),w("jstoflash",!1),U({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),$(!0),E(),!1}return E(),a(),!0},P=function(){return J(),R?!1:(R=!0,W(),function(){var a="sm2-usehtml5audio=",b=p.toLowerCase(),c=null,d="sm2-preferflash=",e=null,f="undefined"!=typeof console&&console.log!==void 0;-1!==b.indexOf(a)&&(c="1"===b.charAt(b.indexOf(a)+a.length),f&&console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),h.useHTML5Audio=c),-1!==b.indexOf(d)&&(e="1"===b.charAt(b.indexOf(d)+d.length),f&&console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),h.preferFlash=e)}(),!Eb&&h.hasHTML5&&(h._wD("SoundManager: No Flash detected"+(h.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),h.useHTML5Audio=!0,h.preferFlash=!1),Ab(),h.html5.usingFlash=ub(),tb=h.html5.usingFlash,Ib(),!Eb&&tb&&(h._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available."),h.flashLoadTimeout=1),q.removeEventListener&&q.removeEventListener("DOMContentLoaded",P,!1),O(),!0)},Q=function(){B=!0,Bb.remove(o,"load",Q)},Fb(),Bb.add(o,"focus",M),Bb.add(o,"load",M),Bb.add(o,"load",Q),Ob&&Ub&&Bb.add(o,"mousemove",M),this.appended=function(){return P(),this}}var b=function(a,b,c){if(a.indexOf)return a.indexOf.call(a,b,c);for(var d=c||0;a.length>d;d++)if(a[d]==b)return d;return-1},c=function(a,c,d,e){var f=a||{};for(var g in c)(!e||b(e,g)>-1)&&(d&&-1!=b(d,g)||(f[g]=c[g]));return f},d=null;a.SoundManager=e,a.soundManager=d})(window);